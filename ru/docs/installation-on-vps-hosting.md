---
title: Установка Eonza на VPS хостинг
desc: Как установить Eonza на VPS хостинг.
---
# Установка на VPS хостинг

Eonza - это обычный веб-сервер, который слушает определенный порт и имеет API. Таким образом, если у вас имеется VPS хостинг, то вы можете установить Eonza на сервер и управлять вашим хостингом из браузера. Для этого вы должны иметь свой сайт с доменным именем и подключенным SSL сертифкатом, так как в этом случае Eonza работает только через *https*. Рассмотрим пример установки Eonza на CentOS 64-bit с существующим доменом *my-eonza-domain.org*. Предположим, что на данном домене уже имеется веб-сайт, поэтому сделаем так, чтобы Eonza открывалась в браузере по адресу **https://www.my-eonza-domain.org:[port]**.

## Шаг 1. Установка Eonza

На сервере создайте директорию, скачайте и сохраните в неё [дистрибутив программы](/downloads/linux-amd64/eonza) для Linux. Например, сохраним программу в директорию */home/eonza/*. Лучше сразу установить пароль для логина, для этого запустите программу с параметрами *-install* и *-psw*. В этом случае, Eonza создаст неообходимые файлы, установит пароль для логина и закончит работу.

``` txt
cd /home/eonza
./eonza -install -psw=mypassword 
```

## Шаг 2. Настройка Eonza

Выберите порт для программы Eonza. Откройте [конфигурационный файл](config.html) *eonza.yaml* в любом редакторе и укажите в разделе *http* следующие поля:

* *host* - доменное имя 
* *port* - порт, который будет слушать программа.
* *open* - укажите *false*, чтобы программа не пыталась открыть Eonza в браузере на сервере.
* *jwtkey* - укажите случайную строку для создания JWT ключей.
* *cert* - файл SSL сертификата.
* *priv* - файл с приватным ключом.

Таким образом, настройки могут быть примерно такими

``` yaml
http:
    host: www.my-eonza-domain.org
    port: 5001
    open: false
    theme: default
    jwtkey: my-secret-jwt-key
    cert: "/etc/letsencrypt/live/my-eonza-domain.org/fullchain.pem"
    priv: "/etc/letsencrypt/live/my-eonza-domain.org/privkey.pem"    
```

В целях безопасности, рекомендуется определить список "белых" ip-адресов и подсетей. В этом случае, все запросы с других ip-адресов будут игнорироваться. Вы можете указать подсети принадлежащие вашему провайдеру. Также, обязательно добавьте локальные подсети *::1/128* и *127.0.0.0/31*. "Белый" список ip-адресов и подсетей указывается в разделе *whiltelist*. Например,

``` yaml
whitelist:
    - ::1/128
    - 127.0.0.0/31
    - 92.140.108.0/24
    - 92.140.109.0/24
```

## Шаг 3. Создание systemd сервиса

Зарегистрируем программу Eonza в качестве сервиса. Для этого создадим файл **eonza.service** в директории **/usr/lib/systemd/system**. Ниже приведен самый простой вариант, хотя *.service* файл может иметь гораздо больше параметров.

``` ini
[Unit]
Description=Eonza Service

[Service]
ExecStart=/home/eonza/eonza
WorkingDirectory=/home/eonza

[Install]
WantedBy=multi-user.target
```

Запускаем и подключаем наш сервис. Eonza будет автоматически запускаться после перезагрузки системы.

``` txt
systemctl start eonza.service
systemctl enable eonza.service
```

Если вы измените файл eonza.service, то необходимо выполнить *systemctl daemon-reload* для обновления настроек. Для получения статуса сервиса используйте *systemctl status eonza.service* или *service eonza status*.

На этом установка и настройка Eonza на VPS хостинге закончена. Укажите в браузере *https://www.my-eonza-domain.org:5001* (или другой порт, который вы указали в настройках) и, если всё было сделано правильно, то вы увидите страницу логина программы Eonza.
